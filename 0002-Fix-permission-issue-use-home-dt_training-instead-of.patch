From b9248dc5d5d3e4dae259066b7d324b832f911e78 Mon Sep 17 00:00:00 2001
From: dynatrace <ace@dynatrace.com>
Date: Sat, 25 Oct 2025 17:31:11 +0000
Subject: [PATCH 2/2] Fix permission issue: use /home/dt_training instead of
 /opt/bizobs and ensure parent directory creation

---
 roles/app-partner-powerup-bizobs/defaults/main.yml | 4 ++--
 roles/app-partner-powerup-bizobs/tasks/main.yml    | 9 +++++++++
 2 files changed, 11 insertions(+), 2 deletions(-)

diff --git a/roles/app-partner-powerup-bizobs/defaults/main.yml b/roles/app-partner-powerup-bizobs/defaults/main.yml
index d531551..82858ed 100644
--- a/roles/app-partner-powerup-bizobs/defaults/main.yml
+++ b/roles/app-partner-powerup-bizobs/defaults/main.yml
@@ -2,8 +2,8 @@
 # Partner PowerUp BizObs - Default Variables
 
 # Application Configuration
-bizobs_user: "bizobs"
-bizobs_home: "/opt/bizobs"
+bizobs_user: "dt_training"
+bizobs_home: "/home/dt_training"
 bizobs_port: 8080
 bizobs_host: "0.0.0.0"
 bizobs_git_branch: "main"
diff --git a/roles/app-partner-powerup-bizobs/tasks/main.yml b/roles/app-partner-powerup-bizobs/tasks/main.yml
index a17f99e..069a52c 100644
--- a/roles/app-partner-powerup-bizobs/tasks/main.yml
+++ b/roles/app-partner-powerup-bizobs/tasks/main.yml
@@ -129,6 +129,15 @@
     create_home: yes
   failed_when: false
 
+- name: Create BizObs parent directory
+  become: true
+  file:
+    path: "{{ bizobs_home | default('/home/dt_training') }}"
+    state: directory
+    owner: "{{ bizobs_user | default('dt_training') }}"
+    group: "{{ bizobs_user | default('dt_training') }}"
+    mode: '0755'
+
 - name: Create BizObs application directory in user home
   become: true
   file:
-- 
2.34.1

